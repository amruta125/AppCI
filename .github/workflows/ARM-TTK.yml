name: ARM TTK

on: 
  push:
    branches: master
    paths: 
      - ".github/workflows/ARM-TTK.yml"
jobs:
   # JOB to run ARM Test Toolkit for arm templates
  test-arm-template-1:
    runs-on: ubuntu-latest
    steps:
       - name: Checkout source code
         uses: actions/checkout@v2.3.3

       - name: Run Test ARM Templates
         id: pathtest

         uses: aliencube/arm-ttk-actions@v0.3
         with:
            path: templates #${{ needs.changes.outputs.templates_files}}
            files: basicLogicApps.json
            
       - name: Test ARM Results
         shell: bash
         continue-on-error: false
         run: |
           echo ${{steps.pathtest.outputs.results}}
   # JOB to run ARM Test Toolkit for arm templates
  test-arm-template-2:
    runs-on: ubuntu-latest
    steps:
       - name: Checkout source code
         uses: actions/checkout@v2.3.3

       - name: ARM-TTK
        # You may pin to the exact commit or the version.
        # uses: venura9/arm-ttk@39fe93a1875dfe86afcbd361a68466226f20aee4
         uses: venura9/arm-ttk@1.0
         id: path-test
         with:
          # Path to run the tests on
           path: templates
    
           
       - name: Results for Run ARM-TTK with 'path'
         run: |
              content=${{ steps.path-test.outputs.results }}
              echo "Results $content"
